<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç WebApp</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
            margin: 0;
            background-color: var(--tg-theme-bg-color, white);
            color: var(--tg-theme-text-color, black);
        }
        .nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            background: white;
            border-top: 1px solid #ddd;
            height: 60px;
        }
        .nav-button {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: none;
            background: none;
            cursor: pointer;
        }
        .active {
            color: blue;
        }
        .button {
            display: block;
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background-color: var(--tg-theme-button-color, #2481cc);
            color: var(--tg-theme-button-text-color, white);
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
        }
        .debug {
            margin-top: 20px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 5px;
            font-size: 12px;
            overflow: auto;
        }
    </style>
</head>
<body>
    <h1>–¢–µ—Å—Ç Telegram WebApp</h1>
    
    <div id="content">
        <p>–¢–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: <span id="current-page">–ì–ª–∞–≤–Ω–∞—è</span></p>
        <input type="text" placeholder="–ü–æ–∏—Å–∫..." style="width:100%; padding:10px; margin-bottom:20px;">
    </div>
    
    <button class="button" onclick="sendDebugInfo()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</button>
    
    <div class="nav">
        <button class="nav-button active" onclick="changePage('home')">
            <span style="font-size:24px">üè†</span>
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </button>
        <button class="nav-button" onclick="changePage('search')">
            <span style="font-size:24px">üîç</span>
            <span>–ü–æ–∏—Å–∫</span>
        </button>
        <button class="nav-button" onclick="changePage('filters')">
            <span style="font-size:24px">‚öôÔ∏è</span>
            <span>–§–∏–ª—å—Ç—Ä—ã</span>
        </button>
        <button class="nav-button" onclick="changePage('favorites')">
            <span style="font-size:24px">‚ù§Ô∏è</span>
            <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
        </button>
    </div>
    
    <div class="debug" id="debug">
        <h3>–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h3>
    </div>
    
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º WebApp
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.ready();
            window.Telegram.WebApp.expand();
            
            document.getElementById('debug').innerHTML += '<p style="color:green">‚úì Telegram WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!</p>';
            document.getElementById('debug').innerHTML += '<p>WebApp Version: ' + window.Telegram.WebApp.version + '</p>';
            document.getElementById('debug').innerHTML += '<p>Theme: ' + window.Telegram.WebApp.colorScheme + '</p>';
        } else {
            document.getElementById('debug').innerHTML += '<p style="color:red">‚úó Telegram WebApp –Ω–µ –Ω–∞–π–¥–µ–Ω!</p>';
        }
        
        function changePage(page) {
            document.getElementById('current-page').textContent = 
                page === 'home' ? '–ì–ª–∞–≤–Ω–∞—è' : 
                page === 'search' ? '–ü–æ–∏—Å–∫' : 
                page === 'filters' ? '–§–∏–ª—å—Ç—Ä—ã' : '–ò–∑–±—Ä–∞–Ω–Ω–æ–µ';
            
            var buttons = document.querySelectorAll('.nav-button');
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove('active');
            }
            
            var activeIndex = 
                page === 'home' ? 0 : 
                page === 'search' ? 1 : 
                page === 'filters' ? 2 : 3;
            
            buttons[activeIndex].classList.add('active');
            
            document.getElementById('debug').innerHTML += '<p>–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞: ' + page + '</p>';
        }
        
        function sendDebugInfo() {
            if (window.Telegram && window.Telegram.WebApp) {
                var debugInfo = {
                    type: 'DEBUG_INFO',
                    userAgent: navigator.userAgent,
                    viewport: {
                        width: window.innerWidth,
                        height: window.innerHeight
                    },
                    webApp: {
                        version: window.Telegram.WebApp.version,
                        colorScheme: window.Telegram.WebApp.colorScheme,
                        isExpanded: window.Telegram.WebApp.isExpanded,
                        viewportHeight: window.Telegram.WebApp.viewportHeight,
                        viewportStableHeight: window.Telegram.WebApp.viewportStableHeight
                    }
                };
                
                document.getElementById('debug').innerHTML += '<p>–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö: ' + JSON.stringify(debugInfo) + '</p>';
                
                try {
                    window.Telegram.WebApp.sendData(JSON.stringify(debugInfo));
                    alert('–û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ –±–æ—Ç!');
                } catch(e) {
                    alert('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ' + e.message);
                    document.getElementById('debug').innerHTML += '<p style="color:red">–û—à–∏–±–∫–∞: ' + e.message + '</p>';
                }
            } else {
                alert('Telegram WebApp –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω!');
            }
        }
    </script>
</body>
</html>
